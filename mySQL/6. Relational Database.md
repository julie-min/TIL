# 관계형 데이터베이스 설계
## Relational Database

### 중요 개념
- Table = relation <br>
- Column = field : 열<br>
- Record = tuple : 행 <br> 
<br>
- Entity : 객체라는 뜻
- 정보를 저장/관리하기 위한 집한
- ex. 학생이라는 엔티티는 학번, 이름, 학점, 전공 등의 속성이 있다.

<br>

----
<br>

## 테이블 간의 관계
**1. 1:1 관계**
- 전화번호, 주민번호와 같은 단일 연결
- 전화번호, 주민번호는 사용자에게 속한다.
- 1:1 관계라면 직접 저장하는 게 나을 수 있다.
- 1 유저 - 1 전화번호
- 1 전화번호 - 1 유저

**2. 1:N 일대다 관계**
- 부서 / 직원
- 부서는 여러 직원을 가진다.
- 직원은 하나의 부서만을 가진다.
- 1 부서 - 다 직원
- 1 직원 - 1 부서
- 부서 <-------- 직원 (필요조건)

**3. N:M 다대다 관계**
- 대학생 / 과목
- 1 학생 - 다 과목
- 1 과목 - 다 학생
- 중간 테이블인 "수강" 테이블을 추가로 생성하여
- 학생과 과목 간의 매핑을 관리함

**4. 자기참조 관계**
- 유저 / 추천인
- 1 유저 - 1 추천인
- 1 추천인 - 다 유저 (가능)
- 같은 테이블에 있는 관계일 때, 
- 자기 자신을 참조한다.
  


## ERD 맵핑
1. 식별관계 <br>
   - Identifying
   - A의 기본키 = B의 기본키+외래키
   - B의 존재여부가 A에게 의존적일 경우


Table: 주문 (Orders)
| 주문번호 (OrderID, PK) | 주문날짜 (OrderDate) | 고객ID (CustomerID, FK) |
| --- | --- | --- |

Table: 고객 (Customers)
| 고객ID (CustomerID, PK) | 이름 (Name) | 전화번호 (Phone) |
| --- | --- | --- |

[해석] <br>
먼저 맵핑의 대상은 고객ID 이다.<br>
A에서의 고객ID는 외래키이다. (당연하겠지)<br>
그럼 그 외래키가 B에서는 어떤 역할인지 보자.<br>
B에서 고객ID는 공교롭게도 기본키다.<br>
B에서 그저 외래키가 아니라 기본키이기 때문에<br>
식별관계, 즉 **실선으로 그려진다.** <br>
<mark>외래키 <-> 외래키,기본키 구조 </mark>



<br>
  
2. 비식별 관계 <br>
   - Non-Identifying
   - A의 기본키 = B의 외래키
   - B는 A의 존재여부와 관계없이 존재
   - 일반적으로 비식별 관계로 존재한다.
   
Table: 학생 (Students)
| 학번 (StudentID, PK) | 이름 (Name) | 학과 (Department) |
| --- | --- | --- |

Table: 성적 (Grades)

| 성적ID (GradeID, PK) | 과목 (Subject) | 학번 (StudentID, FK) | 성적 (Score) |
| --- | --- | --- | --- |

[해석] <br>
먼저 맵핑의 대상은 학번이다.<br>
A에서의 학번은 기본키이다.<br>
B에서 학번은 외래키이다.<br>
B에서 그저 단순 외래키에 불과하다.<br>
식별관계, 즉 **점선으로 그려진다.** <br>
<mark>외래키 <-> 기본키 구조 </mark>


<br>

![다운로드 (1)](https://github.com/julie-min/TIL/assets/130271406/16f6ca32-4cf7-4c4f-a0e8-1de6773ecc1a)

Type1(실선과 실선): 정확히 1 <br>(하나의 A는 하나의 B로 이어져 있다.)<br><br>
Type2(까마귀발): 여러개 <br>(하나의 A는 여러개의 B로 구성되어 있다.)<br><br>
Type3(실선과 까마귀발): 1개 이상 <br>(하나의 A는 하나 이상의 B로 구성되어 있다.)<br><br>
Type4(고리와 실선): 0 혹은 1 <br>(하나의 A는 하나 이하의 B로 구성되어 있다.)<br><br>
Type5(고리와 까마귀발): 0개 이상 <br>(하나의 A는 0또는 하나 이상의 B로 구성되 있다.)<br><br>
기호의 조합은 보통 그림 예제의 <br>Type1, Type3, Type4, Type5를 자주사용한다. 
<br><br><br>
>출처: https://eyecandyzero.tistory.com/246
> https://hanamon.kr/%EA%B4%80%EA%B3%84%ED%98%95-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%84%A4%EA%B3%84-%EA%B4%80%EA%B3%84-%EC%A2%85%EB%A5%98/

